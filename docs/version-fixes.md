# 宇树G1 EDU修复方案

## 需要新增的功能

1、添加注册页面

2、用户下拉菜单（可以查看个人信息、退出登录）

3、系统看板可以通过卡片视图查看设备的状态（关机、开机、空闲、使用中）、CPU温度、CPU与内存使用率、IP地址、网络信号与网速、当前位置，具体查看原型图

4、添加左侧菜单：知识库、提示词

可以对知识库，提示词进行增删改查

知识库的数据表结构

知识库和提示词表结构一致，但是请注意使用两个表，因为后续需要修改



提示词的数据表结构

| 字段名      | 类型         | 说明                                                         |
| ----------- | ------------ | ------------------------------------------------------------ |
| id          | bigint       | 主键，自增唯一标识，用于区分不同提示词                       |
| content     | text         | 提示词的核心内容（必填），支持长文本                         |
| title       | varchar(255) | 提示词标题（可选），用于快速识别，如 “小红书文案生成模板”    |
| description | varchar(500) | 提示词描述（可选），说明用途、适用场景等，如 “用于生成美妆产品种草文案” |
| status      | tinyint      | 状态（0 - 草稿，1 - 已发布，2 - 已下架），默认 0             |
| creator_id  | bigint       | 关联用户表（user）的创建者 ID，记录是谁创建的提示词          |
| create_time | datetime     | 创建时间，自动记录                                           |
| update_time | datetime     | 更新时间，修改时自动更新                                     |
| use_count   | int          | 被使用次数，统计该提示词的调用频率，默认 0                   |
| is_public   | tinyint      | 是否公开（0 - 私有，1 - 公开），控制提示词的可见范围，默认 0 |



5、添加角色管理，菜单管理，基于RBAC的权限控制，

6、添加语音配置，将AI语音设置卡片迁移过去，







## 需要修复的功能

1、修复权限控制不精确的问题，使用中间件拦截全部的接口，只放行必要的接口，具体的请设计完RBAC系统后继续

2、修复文件上传的漏洞，支持的格式：PPT、PDF、JPG、PNG，上传的图片需要可以预览，

3、开始讲课、

4、设备详情不可用，批量导入、批量导出不可用、批量部署不可用（执行Python脚本）、缺少删除设备功能

5、添加设备存在BUG，设备ID改成序列号，请注意不要与（id字段冲突），

6、添加账号不可用、重置密码、编辑、删除功能不可用

7、系统设置配置信息需要保存到数据库，请你设计数据表或者保存到Redis，注意每个用户的设置是不一样的



## 需要删除的功能

1、不需要用户手动选择身份，用户登录后根据不同角色展示不同菜单和功能

2、系统看板去掉快捷操作功能

3、教育培训的高级设置功能删除、



## 开发规范

* 对于数据模型，需要有一个BaseModel，这个模型定义一些基础的字段，例如：创建时间、更新时间
* result类迁移到app的utils目录下，凡是Python模块需要`__init__.py`文件
* 所有接口采用RESTful风格
* 对于权限的控制、异常处理、操作日志采取中间件结合注解的方式实现，
* 对于数据校验，新建form模块进行表单数据校验



